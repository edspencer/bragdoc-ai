# pnpm configuration optimized for Cloudflare Workers builds

# Use frozen lockfile for reproducible builds
frozen-lockfile=true

# Optimize installation speed
prefer-frozen-lockfile=true
package-import-method=copy
side-effects-cache=true

# Reduce symlink overhead (faster on CI)
# Note: We don't set shamefully-hoist here because it breaks Jest's ESM handling
# Cloudflare Pages and other CI environments can set it via environment-specific config

# Cloudflare Pages cache optimization
# Use relative store path so Cloudflare's build cache can cache it
store-dir=.pnpm-store

# Network optimizations
fetch-retries=3
fetch-retry-mintimeout=10000
fetch-retry-maxtimeout=60000
fetch-timeout=120000

# Disable telemetry in CI
enable-pre-post-scripts=true
