version: 2
updates:
  # Root workspace
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 10
    groups:
      nextjs:
        patterns:
          - "next"
          - "@next/*"
          - "next-*"
      react:
        patterns:
          - "react"
          - "react-dom"
          - "@types/react"
          - "@types/react-dom"
      radix-ui:
        patterns:
          - "@radix-ui/*"
      ai-sdk:
        patterns:
          - "ai"
          - "@ai-sdk/*"
          - "@openrouter/*"
      auth:
        patterns:
          - "next-auth"
          - "@auth/*"
      database:
        patterns:
          - "drizzle-orm"
          - "drizzle-kit"
          - "@auth/drizzle-adapter"
          - "postgres"
          - "@vercel/postgres"
      stripe:
        patterns:
          - "stripe"
          - "@stripe/*"
      testing:
        patterns:
          - "jest"
          - "@types/jest"
          - "@swc/jest"
          - "ts-jest"
          - "@testing-library/*"
          - "jest-*"
      linting:
        patterns:
          - "eslint"
          - "eslint-*"
          - "@eslint/*"
          - "@biomejs/*"
          - "biome"
          - "typescript-eslint"
      tailwind:
        patterns:
          - "tailwindcss"
          - "@tailwindcss/*"
          - "tailwind-*"
      mdx:
        patterns:
          - "@mdx-js/*"
          - "mdx"
          - "mdx-*"
          - "next-mdx-remote"
      vercel:
        patterns:
          - "@vercel/*"
      prosemirror:
        patterns:
          - "prosemirror-*"
    ignore:
      # Ignore major version updates for critical dependencies
      - dependency-name: "next"
        update-types: ["version-update:semver-major"]
      - dependency-name: "@next/mdx"
        update-types: ["version-update:semver-major"]
      - dependency-name: "@next/third-parties"
        update-types: ["version-update:semver-major"]
      - dependency-name: "react"
        update-types: ["version-update:semver-major"]
      - dependency-name: "react-dom"
        update-types: ["version-update:semver-major"]

  # Web app
  - package-ecosystem: "npm"
    directory: "/apps/web"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5
    groups:
      all-dependencies:
        patterns:
          - "*"
    ignore:
      # Ignore major version updates for critical dependencies
      - dependency-name: "next"
        update-types: ["version-update:semver-major"]
      - dependency-name: "@next/mdx"
        update-types: ["version-update:semver-major"]
      - dependency-name: "@next/third-parties"
        update-types: ["version-update:semver-major"]
      - dependency-name: "react"
        update-types: ["version-update:semver-major"]
      - dependency-name: "react-dom"
        update-types: ["version-update:semver-major"]

  # Marketing app
  - package-ecosystem: "npm"
    directory: "/apps/marketing"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5
    groups:
      all-dependencies:
        patterns:
          - "*"
    ignore:
      # Ignore major version updates for critical dependencies
      - dependency-name: "next"
        update-types: ["version-update:semver-major"]
      - dependency-name: "@next/mdx"
        update-types: ["version-update:semver-major"]
      - dependency-name: "@next/third-parties"
        update-types: ["version-update:semver-major"]
      - dependency-name: "react"
        update-types: ["version-update:semver-major"]
      - dependency-name: "react-dom"
        update-types: ["version-update:semver-major"]

  # Database package
  - package-ecosystem: "npm"
    directory: "/packages/database"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5
    groups:
      all-dependencies:
        patterns:
          - "*"

  # CLI package
  - package-ecosystem: "npm"
    directory: "/packages/cli"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5
    groups:
      all-dependencies:
        patterns:
          - "*"

  # Email package
  - package-ecosystem: "npm"
    directory: "/packages/email"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5
    groups:
      all-dependencies:
        patterns:
          - "*"
    ignore:
      # Ignore major version updates for critical dependencies
      - dependency-name: "react"
        update-types: ["version-update:semver-major"]
      - dependency-name: "react-dom"
        update-types: ["version-update:semver-major"]

  # Config package
  - package-ecosystem: "npm"
    directory: "/packages/config"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5
    groups:
      all-dependencies:
        patterns:
          - "*"

  # TypeScript config package
  - package-ecosystem: "npm"
    directory: "/packages/typescript-config"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5
    groups:
      all-dependencies:
        patterns:
          - "*"

  # GitHub Actions
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 3
